import{E as s,p as I,j as l,y as S,F as P,b as E}from"./chunk-CciNT7-1.js";const F=e=>{const t="ontouchstart"in window;(window.matchMedia("(max-width: 1024px)").matches||t)&&e.requestFullscreen()},b=s.createContext({onInitPlayer:()=>{},status:"initial"}),L="https://www.youtube-nocookie.com",V="https://www.youtube.com",x="https://img.youtube.com",j=e=>{if(e)try{const t=new URL(e);return t.pathname==="/embed"?void 0:t.hostname==="youtu.be"?t.pathname.slice(1):t.searchParams.get("v")||t.pathname.split("/").pop()}catch{return e}},N=(e,t)=>{var r,o;const c=j(e.url),i=new URL(t);if(c)i.pathname=`/embed/${c}`;else if(e.url)try{const n=new URL(e.url);i.pathname=n.pathname,i.search=n.search}catch{}const d=Object.keys(e),a={};a.autoplay="1";for(const n of d)if(e[n]!==void 0)switch(n){case"autoplay":e.autoplay&&e.muted===void 0&&(a.mute="1");break;case"muted":a.mute=e.muted?"1":"0";break;case"showControls":a.controls=e.showControls?"1":"0";break;case"showRelatedVideos":a.rel=e.showRelatedVideos?"1":"0";break;case"keyboard":a.keyboard=e.keyboard?"1":"0";break;case"loop":a.loop=e.loop?"1":"0",e.loop&&(e.playlist??"").trim()===""&&(a.playlist=c);break;case"inline":a.playsinline=e.inline?"1":"0";break;case"allowFullscreen":a.fs=e.allowFullscreen?"1":"0";break;case"captionLanguage":a.cc_lang_pref=e.captionLanguage;break;case"showCaptions":a.cc_load_policy=e.showCaptions?"1":"0";break;case"showAnnotations":a.iv_load_policy=e.showAnnotations?"1":"3";break;case"startTime":a.start=(r=e.startTime)==null?void 0:r.toString();break;case"endTime":a.end=(o=e.endTime)==null?void 0:o.toString();break;case"disableKeyboard":a.disablekb=e.disableKeyboard?"1":"0";break;case"language":a.hl=e.language;break;case"listId":a.list=e.listId;break;case"listType":a.listType=e.listType;break;case"color":a.color=e.color;break;case"origin":a.origin=e.origin;break;case"referrer":a.widget_referrer=e.referrer;break;case"playlist":a.playlist=e.playlist;break;case"enablejsapi":a.enablejsapi=e.enablejsapi?"1":"0";break}return Object.entries(a).forEach(([n,u])=>{u!==void 0&&i.searchParams.append(n,u.toString())}),i.toString()},A=e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="true",document.head.appendChild(t)};let C=!1;const T=e=>{if(!(C||window.matchMedia("(hover: none)").matches)){try{const t=new URL(e);A(t.origin)}catch{}A(x),C=!0}},_=e=>new URL(`${x}/vi/${e}/maxresdefault.jpg`),O=()=>l.jsx("div",{className:"flex w-full h-full items-center justify-center text-lg",children:'Open the "Settings" panel and paste a video URL, e.g. https://youtube.com/watch?v=dQw4w9WgXcQ'}),$=({title:e,status:t,loading:r,videoUrl:o,previewImageUrl:c,autoplay:i,inline:d,renderer:a,showPreview:n,onStatusChange:u,onPreviewImageUrlChange:p})=>{const[y,w]=s.useState(0),h=s.useRef(null);return s.useEffect(()=>{i&&a!=="canvas"&&t==="initial"&&u("loading")},[i,t,a,u]),s.useEffect(()=>{a!=="canvas"&&T(o)},[a,o]),s.useEffect(()=>{const m=j(o);if(!m||!n){p(void 0);return}c||p(_(m))},[p,n,o,c]),a==="canvas"||t==="initial"?null:l.jsx("iframe",{ref:h,title:e,src:o,loading:r,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",width:"100%",height:"100%",opacity:y,transition:"opacity 1s",border:"none"},onLoad:()=>{u("ready"),w(1),!d&&!i&&h.current&&F(h.current)}})},K=s.forwardRef(({url:e,loading:t="lazy",autoplay:r,showPreview:o,showAnnotations:c,showCaptions:i,showControls:d,allowFullscreen:a,keyboard:n,children:u,privacyEnhancedMode:p,inline:y=!1,...w},h)=>{const[m,g]=s.useState("initial"),[f,R]=s.useState(),{renderer:v}=s.useContext(I),U=p??!0?L:V,k=N({...w,inline:y,url:e,keyboard:n,showAnnotations:c,showCaptions:i,allowFullscreen:a,showControls:d,autoplay:r,enablejsapi:!1},U);return l.jsx(b.Provider,{value:{status:m,previewImageUrl:f,onInitPlayer(){v!=="canvas"&&g("loading")}},children:l.jsx("div",{...w,ref:h,children:k?l.jsxs(l.Fragment,{children:[u,l.jsx($,{title:w.title,autoplay:r,videoUrl:k,previewImageUrl:f,loading:t,inline:y,showPreview:o,renderer:v,status:m,onStatusChange:g,onPreviewImageUrlChange:R})]}):l.jsx(O,{})})})});K.displayName="YouTube";const M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkOAMAANIAzr59FiYAAAAASUVORK5CYII=",Q=s.forwardRef(({src:e,...t},r)=>{const o=s.useContext(b);return l.jsx(S,{...t,src:String(o.previewImageUrl??e??M),ref:r})});Q.displayName="VimeoPreviewImage";const Y=s.forwardRef((e,t)=>{const r=s.useContext(b),o=s.useCallback(async()=>{await P(),r.onInitPlayer()},[r]);if(r.status==="initial")return l.jsx(E,{...e,onClick:o,ref:t})});Y.displayName="VimeoPlayButton";const B=s.forwardRef((e,t)=>{if(s.useContext(b).status==="loading")return l.jsx("div",{...e,ref:t})});B.displayName="VimeoSpinner";export{K as $,Y as f,B as m,Q as s};
